---
import Layout from '~/layouts/Layout.astro'
import NewsletterForm from '~/components/NewsletterForm.astro'
import { createWebPageSchema } from '~/utils/schema'
import { getTranslations as getI18nTranslations, getLocalizedPath } from '~/i18n/utils'

const lang = 'en' as const
const t = getI18nTranslations(lang)
const pageSchema = createWebPageSchema({
  name: t.pages.resources.heroTitle,
  url: Astro.url.toString(),
  description: t.pages.resources.heroSubtitle,
})
---

<Layout
  title={`${t.pages.resources.heroTitle} â€“ LAOM`}
  description={t.pages.resources.heroSubtitle}
  seo={{
    ldJSON: pageSchema,
  }}
>
  <section class="py-32 lg:py-40 bg-white">
    <div class="max-w-6xl mx-auto px-10 sm:px-16 lg:px-24 text-center">
      <span class="block text-xs font-light tracking-[0.2em] uppercase text-black/40 mb-6">
        Resources
      </span>
      <h1 class="text-5xl md:text-6xl lg:text-7xl font-light text-black mb-6 tracking-tight">
        {t.pages.resources.heroTitle}
      </h1>
      <p class="text-xl md:text-2xl font-light text-black/60 max-w-3xl mx-auto leading-relaxed">
        {t.pages.resources.heroSubtitle}
      </p>
    </div>
  </section>

  <!-- Intro -->
  <section class="py-24 bg-[#faf9f6]">
    <div class="max-w-6xl mx-auto px-10 sm:px-16 lg:px-24 grid gap-12 lg:grid-cols-[1.1fr,0.9fr] items-start">
      <div>
        <h2 class="text-3xl md:text-4xl font-light text-black mb-6">{t.pages.resources.introTitle}</h2>
        <p class="text-lg font-light text-black/70 leading-relaxed">{t.pages.resources.introDescription}</p>
      </div>
      <div class="border border-black/10 bg-white p-8 lg:p-10 shadow-sm">
        <p class="text-xs tracking-[0.3em] uppercase text-black/50 mb-6">Channels</p>
        <div class="space-y-4">
          {t.pages.resources.items.map((item) => {
            const url = 'href' in item ? item.href : undefined
            return url ? (
              <a
                href={url}
                target="_blank"
                rel="noopener noreferrer"
                aria-label={`${item.title} (opens in new tab)`}
                class="block hover:opacity-80 transition-opacity"
              >
                <h3 class="text-base font-light text-black mb-1">{item.title}</h3>
                <p class="text-sm font-light text-black/60 leading-relaxed">{item.description}</p>
              </a>
            ) : (
              <div>
                <h3 class="text-base font-light text-black mb-1">{item.title}</h3>
                <p class="text-sm font-light text-black/60 leading-relaxed">{item.description}</p>
              </div>
            )
          })}
        </div>
      </div>
    </div>
  </section>

  <!-- Newsletter -->
  <section class="py-24 bg-[#eef4ea]">
    <div class="max-w-6xl mx-auto px-10 sm:px-16 lg:px-24">
      <div class="max-w-xl">
        <NewsletterForm variant="light" />
      </div>
    </div>
  </section>

  <!-- Lead Magnets -->
  <section class="py-24 bg-white">
    <div class="max-w-6xl mx-auto px-10 sm:px-16 lg:px-24">
      <h2 class="text-3xl md:text-4xl font-light text-black mb-10">{t.pages.resources.leadMagnetsTitle}</h2>
      <div class="grid gap-6 md:grid-cols-3">
        {t.pages.resources.leadMagnets.map((item) => (
          <div class="border border-black/10 bg-[#eef4ea] p-6 lg:p-8">
            <h3 class="text-lg font-light text-black mb-3">{item.title}</h3>
            <p class="text-sm font-light text-black/60 leading-relaxed">{item.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Ebooks -->
  <section class="py-24 bg-[#faf9f6]">
    <div class="max-w-6xl mx-auto px-10 sm:px-16 lg:px-24">
      <h2 class="text-3xl md:text-4xl font-light text-black mb-10">{t.pages.resources.ebooksTitle}</h2>
      <div class="grid gap-6 md:grid-cols-3">
        {t.pages.resources.ebooks.map((item) => (
          <div class="border border-black/10 bg-white p-6 lg:p-8 shadow-sm">
            <h3 class="text-lg font-light text-black mb-3">{item.title}</h3>
            <p class="text-sm font-light text-black/60 leading-relaxed">{item.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Tools -->
  <section class="py-24 bg-white">
    <div class="max-w-6xl mx-auto px-10 sm:px-16 lg:px-24">
      <h2 class="text-3xl md:text-4xl font-light text-black mb-10">{t.pages.resources.toolsTitle}</h2>
      <div class="grid gap-6 md:grid-cols-2">
        {t.pages.resources.tools.map((item) => (
          <div class="border border-black/10 bg-[#f3efe7] p-6 lg:p-8">
            <h3 class="text-lg font-light text-black mb-3">{item.title}</h3>
            <p class="text-sm font-light text-black/60 leading-relaxed">{item.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Guides -->
  <section class="py-24 bg-[#faf9f6]">
    <div class="max-w-6xl mx-auto px-10 sm:px-16 lg:px-24">
      <h2 class="text-3xl md:text-4xl font-light text-black mb-10">{t.pages.resources.guidesTitle}</h2>
      <div class="grid gap-6 md:grid-cols-2">
        {t.pages.resources.guides.map((item) => (
          <div class="border border-black/10 bg-white p-6 lg:p-8 shadow-sm">
            <h3 class="text-lg font-light text-black mb-3">{item.title}</h3>
            <p class="text-sm font-light text-black/60 leading-relaxed">{item.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Videos -->
  <section class="py-24 bg-white">
    <div class="max-w-6xl mx-auto px-10 sm:px-16 lg:px-24">
      <h2 class="text-3xl md:text-4xl font-light text-black mb-10">{t.pages.resources.videosTitle}</h2>
      <div class="grid gap-6 md:grid-cols-2">
        {t.pages.resources.videos.map((item) => {
          const url = 'href' in item ? item.href : undefined
          return url ? (
            <a
              href={url}
              target="_blank"
              rel="noopener noreferrer"
              aria-label={`${item.title} (opens in new tab)`}
              class="block border border-black/10 bg-[#eef4ea] p-6 lg:p-8 hover:border-black/20 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/20 focus-visible:ring-offset-2"
            >
              <h3 class="text-lg font-light text-black mb-3">{item.title}</h3>
              <p class="text-sm font-light text-black/60 leading-relaxed">{item.description}</p>
            </a>
          ) : (
            <div class="border border-black/10 bg-[#eef4ea] p-6 lg:p-8">
              <h3 class="text-lg font-light text-black mb-3">{item.title}</h3>
              <p class="text-sm font-light text-black/60 leading-relaxed">{item.description}</p>
            </div>
          )
        })}
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="py-20 bg-[#2d5016] text-white">
    <div class="max-w-5xl mx-auto px-10 sm:px-16 lg:px-24 text-center">
      <h2 class="text-3xl md:text-4xl font-light mb-4">{t.pages.resources.ctaTitle}</h2>
      <p class="text-lg font-light text-white/80 mb-8">{t.pages.resources.ctaDescription}</p>
      <a
        href={getLocalizedPath('/school/', lang as 'fr' | 'en')}
        class="inline-flex items-center justify-center rounded-sm bg-white text-black px-8 py-3 text-xs tracking-[0.25em] uppercase hover:bg-white/90 transition-colors"
      >
        {t.pages.resources.ctaButton}
      </a>
    </div>
  </section>
</Layout>
